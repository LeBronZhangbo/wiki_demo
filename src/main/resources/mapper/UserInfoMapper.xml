<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.zhangbo.wiki_back.mapper.UserInfoMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="org.zhangbo.wiki_back.entity.UserInfo">
        <id column="id" property="id"/>
        <result column="name" property="name"/>
        <result column="email_address" property="emailAddress"/>
        <result column="phone_number" property="phoneNumber"/>
        <result column="account" property="account"/>
        <result column="password" property="password"/>
        <result column="create_time" property="createTime"/>
        <result column="modified_time" property="modifiedTime"/>
        <result column="role" property="role"/>
    </resultMap>
    <update id="modifyPwdOrName" parameterType="java.util.Map">
        update wiki_base.t_user_info
        <set>
            <if test="name!=null">
                name = #{name} ,
            </if>
            <if test="password!=null">
                password = #{password}
            </if>
        </set>
        <where>
            <if test="email_address!=null">
                and email_address = #{email_address}
            </if>
            <if test="phone_number!=null">
                and phone_number = #{phone_number}
            </if>
        </where>
    </update>
    <select id="checkUserExistByMap" resultType="java.lang.Long" parameterType="java.util.Map">
        select count(*) from wiki_base.t_user_info
        <where>
            password = #{password}
            <if test="email_address!=null">
                and email_address = #{email_address}
            </if>
            <if test="phone_number!=null">
                and phone_number = #{phone_number}
            </if>
        </where>
    </select>

</mapper>
